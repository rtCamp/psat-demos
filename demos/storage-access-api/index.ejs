<%- include(commonPath + '/header.ejs') %>

<div class="container mx-auto py-8">
    <h1 class="text-3xl font-bold mb-4 text-center">Analytics with Storage Access API</h1>
    <p class="text-lg font-bold mb-4 text-center">Here is a button that track clicks using third-party analytics service, check if it works.</p>
    <script>
        let hasAccess = false;
        
        async function handleCookieAccessInit() {
            if(!document.hasStorageAccess) {
                hasAccess = true;
            } else {
                hasAccess = await document.hasStorageAccess();
                if(!hasAccess) {
                    await document.requestStorageAccess();
                    hasAccess = await document.hasStorageAccess();
                }
            }
        }
    </script>
    <script src="<%= protocol %>://<%= domainC %><% if (isPortPresent) { %>:<%= port %><% } %>/storage-access-api/analytics.js"></script>
    
    <div class="flex justify-center space-x-4 mt-4">
        <button onclick="trackInteraction('buttonClicked')" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-700 transition duration-300">
            Click me!
        </button>
    </div>
    <div id="status" class="text-center text-lg mt-4"></div>
</div>

<%- include(commonPath + '/footer.ejs') %>
